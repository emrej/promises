<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Promises, promises</title>
</head>
<body>
<script>
    // Promises code will go here
    const areParentsHappy = true;

    // Promise
    const willGetNewPhone = new Promise((resolve, reject) => {
        if (areParentsHappy) {
            const phone = {
                brand: 'Apple',
                model: 'iPhone Xs',
                color: 'Space Gray'
            };

            resolve(phone); // fulfilled
        } else {
            const reason = new Error('parents are not happy');

            reject(reason); // reject
        }
    });

    // Friend promise
    const showOff = phone => Promise.resolve(`Hey bro, I have a new ${phone.color} ${phone.brand} ${phone.model} phone`);

    // Call our promise
    const askParents = async () => {
        try {
            console.log('Before asking parents');

            const phone = await willGetNewPhone;
            const message = await showOff(phone);

            console.log(message);
        }
        catch (error) {
            console.log(error.message);
        }
        finally {
            console.log('After asking parents');
        }
    };

    askParents();

    // (async () => {
    //     await askParents();
    // })();
</script>
</body>
</html>